# 메인페이지 개편

> 구현 완료: 2025-01-11

---

## 1. 개요

로그인 없이 셀럽의 콘텐츠 기록을 탐색할 수 있는 메인페이지를 구현했다.

### 핵심 변경사항

| 항목 | 변경 전 | 변경 후 |
|------|--------|--------|
| `/` | 랜딩 페이지 | 셀럽 피드 (메인) |
| `/about` | 없음 | 서비스 소개 (기존 랜딩) |
| 셀럽 관리 | 없음 | 백오피스에서 관리 |

---

## 2. 라우팅

| 경로 | 용도 | 비로그인 접근 |
|------|------|--------------|
| `/` | 셀럽 피드 | O |
| `/about` | 서비스 소개 | O |
| `/archive` | 내 기록관 | X |
| `/archive/user/[id]` | 타인/셀럽 기록관 | O (열람만) |

---

## 3. 구현 파일

### 사용자 웹 (sw/web)

```
src/
├── app/
│   ├── (main)/page.tsx              # 메인페이지
│   └── about/page.tsx               # 서비스 소개
│
├── actions/home/
│   ├── index.ts
│   ├── getCelebs.ts                 # 셀럽 목록
│   ├── getCelebFeed.ts              # 셀럽 리뷰 피드
│   └── getFriendActivity.ts         # 친구 활동
│
├── components/features/home/
│   ├── CelebCarousel.tsx            # 셀럽 캐러셀
│   ├── CelebProfileCard.tsx         # 프로필 카드
│   ├── CelebFeed.tsx                # 리뷰 피드
│   ├── CelebReviewCard.tsx          # 리뷰 카드
│   ├── ContentTypeTabs.tsx          # 콘텐츠 필터
│   ├── FriendActivitySection.tsx    # 친구 활동 (로그인 시)
│   └── SignupBanner.tsx             # 가입 유도 (비로그인 시)
│
└── types/home.ts                    # 타입 정의
```

### 백오피스 (sw/web-bo)

```
src/
├── app/(admin)/celebs/
│   ├── page.tsx                     # 셀럽 목록
│   ├── new/page.tsx                 # 셀럽 생성
│   └── [id]/
│       ├── page.tsx                 # 셀럽 상세/편집
│       └── contents/page.tsx        # 콘텐츠 관리
│
├── actions/admin/celebs.ts          # 셀럽 CRUD 액션
│
└── constants/celebCategories.ts     # 셀럽 분야 상수
```

---

## 4. 셀럽 계정 관리

### 계정 타입 (profiles.profile_type)

| 값 | 설명 |
|---|------|
| `USER` | 일반 사용자 |
| `CELEB` | 셀럽 계정 |

### 셀럽 계정 상태

| claimed_by | is_verified | 상태 |
|------------|-------------|------|
| NULL | false | 관리자가 대리 관리 중 |
| user_id | true | 셀럽 본인이 인수함 |

### 셀럽 분야 (profiles.category)

```typescript
// sw/web-bo/src/constants/celebCategories.ts
const CELEB_CATEGORIES = [
  { value: 'author', label: '작가' },
  { value: 'actor', label: '배우' },
  { value: 'youtuber', label: '유튜버' },
  { value: 'streamer', label: '스트리머' },
  { value: 'musician', label: '뮤지션' },
  { value: 'athlete', label: '운동선수' },
  { value: 'influencer', label: '인플루언서' },
  { value: 'other', label: '기타' },
]
```

---

## 5. 주요 쿼리

### 셀럽 목록 조회

```sql
SELECT p.*, us.follower_count
FROM profiles p
LEFT JOIN user_social us ON us.user_id = p.id
WHERE p.profile_type = 'CELEB'
  AND p.status = 'active'
ORDER BY us.follower_count DESC
```

### 셀럽 리뷰 피드

```sql
SELECT uc.*, c.*, p.*
FROM user_contents uc
JOIN contents c ON c.id = uc.content_id
JOIN profiles p ON p.id = uc.user_id
WHERE p.profile_type = 'CELEB'
  AND p.status = 'active'
  AND uc.review IS NOT NULL
  AND uc.visibility = 'public'
ORDER BY uc.updated_at DESC
```

---

## 6. 추후 구현 예정

- [ ] 셀럽 카테고리 필터 (유튜버, 작가 등)
- [ ] 비로그인 제한 정책 (N개 이후 로그인 요구)
- [ ] 셀럽 계정 인수(Claim) 프로세스
- [ ] 셀럽 리뷰 SNS 공유 카드
