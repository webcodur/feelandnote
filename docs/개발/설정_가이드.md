# Phase 1 설정 가이드

## 1. Supabase 프로젝트 설정

### 1.1 프로젝트 생성
1. [Supabase](https://supabase.com) 접속 후 로그인
2. "New project" 클릭
3. 프로젝트 정보 입력:
   - Name: `feelnnote` (또는 원하는 이름)
   - Database Password: 강력한 비밀번호 설정 (저장해둘 것)
   - Region: Northeast Asia (Seoul) 선택
4. "Create new project" 클릭 후 생성 완료까지 대기 (약 2분)

### 1.2 API 키 확인
1. 프로젝트 대시보드에서 **Settings > API** 이동
2. 다음 값들을 복사:
   - **Project URL**: `https://xxxxx.supabase.co`
   - **anon public**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`
   - **service_role**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...` (주의: 서버에서만 사용)

### 1.3 데이터베이스 테이블 생성
1. **SQL Editor** 이동
2. `supabase/migrations/00001_phase1_tables.sql` 파일 내용 복사
3. SQL Editor에 붙여넣기 후 "Run" 실행
4. 성공 메시지 확인

### 1.4 환경변수 설정
프로젝트 루트에 `.env.local` 파일 생성:

```bash
cp .env.local.example .env.local
```

`.env.local` 파일 편집:
```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# App
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Naver API
NAVER_CLIENT_ID=your-naver-client-id
NAVER_CLIENT_SECRET=your-naver-client-secret
```

---

## 2. OAuth 인증 설정

### 2.1 Google OAuth

#### Google Cloud Console 설정
1. [Google Cloud Console](https://console.cloud.google.com) 접속
2. 새 프로젝트 생성 또는 기존 프로젝트 선택
3. **APIs & Services > OAuth consent screen** 이동
   - User Type: External 선택
   - App name, User support email 입력
   - Developer contact email 입력
   - Save and Continue
4. **APIs & Services > Credentials** 이동
5. **Create Credentials > OAuth client ID** 클릭
   - Application type: Web application
   - Name: Feelnnote
   - Authorized JavaScript origins:
     - `http://localhost:3000`
     - `https://your-project.supabase.co`
   - Authorized redirect URIs:
     - `https://your-project.supabase.co/auth/v1/callback`
6. Client ID와 Client Secret 복사

#### Supabase에 Google Provider 설정
1. Supabase Dashboard > **Authentication > Providers**
2. Google 클릭
3. Enable Google provider 활성화
4. Client ID, Client Secret 입력
5. Save

### 2.2 Kakao OAuth

#### Kakao Developers 설정
1. [Kakao Developers](https://developers.kakao.com) 접속
2. 내 애플리케이션 > 애플리케이션 추가하기
3. 앱 이름, 사업자명 입력 후 저장
4. **앱 키** 메뉴에서 REST API 키 복사
5. **카카오 로그인** 메뉴:
   - 활성화 설정: ON
   - Redirect URI 등록: `https://your-project.supabase.co/auth/v1/callback`
6. **동의항목** 메뉴:
   - 닉네임: 필수 동의
   - 프로필 사진: 선택 동의
   - 카카오계정(이메일): 필수 동의 (비즈 앱 전환 필요)

#### Supabase에 Kakao Provider 설정
1. Supabase Dashboard > **Authentication > Providers**
2. Kakao 클릭
3. Enable Kakao provider 활성화
4. Client ID (REST API 키) 입력
5. Client Secret은 Kakao Developers > 보안 > Client Secret에서 생성
6. Save

---

## 3. 네이버 도서 검색 API 설정

### 3.1 애플리케이션 등록
1. [네이버 개발자 센터](https://developers.naver.com) 접속
2. 로그인 후 **Application > 애플리케이션 등록**
3. 애플리케이션 정보 입력:
   - 애플리케이션 이름: Feelnnote
   - 사용 API: 검색 선택
4. 등록 완료 후 **Client ID**와 **Client Secret** 확인
5. `.env.local`에 추가:
```env
NAVER_CLIENT_ID=your-client-id
NAVER_CLIENT_SECRET=your-client-secret
```

---

## 4. 개발 서버 실행

```bash
cd sw/web
pnpm install  # 의존성 설치
pnpm dev      # 개발 서버 시작
```

브라우저에서 `http://localhost:3000` 접속

---

## 5. 체크리스트

- [ ] Supabase 프로젝트 생성 완료
- [ ] 데이터베이스 마이그레이션 실행 완료
- [ ] `.env.local` 파일 생성 및 환경변수 설정
- [ ] Google OAuth 설정 완료
- [ ] Kakao OAuth 설정 완료
- [ ] 네이버 API 키 발급 완료
- [ ] 개발 서버 정상 실행 확인
- [ ] 로그인 테스트 완료

---

## 6. 문제 해결

### 로그인 후 리다이렉트가 안 될 때
- Supabase의 Redirect URLs 설정 확인
- `NEXT_PUBLIC_SITE_URL` 환경변수 확인

### 도서 검색이 안 될 때
- 네이버 API 키가 올바른지 확인
- API 키 없이도 Mock 데이터로 동작함

### RLS 정책 오류
- 마이그레이션 SQL이 완전히 실행되었는지 확인
- Supabase Dashboard > Authentication > Users에서 사용자 확인
