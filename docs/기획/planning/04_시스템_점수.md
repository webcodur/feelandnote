# 05-01. 점수 시스템

## 개요

점수 시스템은 사용자의 활동을 수치화하는 핵심 엔진이다. 활동 점수와 칭호 보너스가 합쳐져 업적 점수가 되며, 이는 영향력 계산의 기반이 된다.

---

## 점수 구조

```
업적 점수 = 활동 점수 + 칭호 보너스 합계
```

---

## 활동 점수

일반적인 기록 활동으로 획득하는 점수. 활동 시 즉시 누적.

### 점수 배분표

| 활동 | 점수 | 발생 조건 |
|------|------|-----------|
| 콘텐츠 추가 | +1 | 기록관에 콘텐츠 추가 시 |
| Review 작성 | +5 | Review 최초 저장 시 |
| Note 작성 | +3 | Note 최초 저장 시 |
| 창작 작성 | +10 | 창작 저장 시 (건당) |
| 댓글 작성 | +1 | 댓글 작성 시 |
| 좋아요 받음 | +2 | 내 글에 좋아요 받을 때마다 |

### 점수 규칙

#### 중복 방지
- Review: 콘텐츠당 1회만 점수 부여 (수정 시 추가 점수 없음)
- Note: 콘텐츠당 1회만 점수 부여 (수정 시 추가 점수 없음)
- 창작: 작성 건당 점수 부여 (복수 작성 가능)

#### 삭제 시 처리
- 삭제해도 이미 획득한 점수는 **차감하지 않음**
- 악용 방지: 동일 콘텐츠 재작성 시 점수 미부여

#### 좋아요 점수
- 좋아요 받을 때마다 +2
- 좋아요 취소 시 -2
- 음수 방지: 최소 0점

---

## 칭호 보너스

칭호 해금 시 1회성으로 추가되는 보너스 점수.

### 등급별 보너스

| 등급 | 색상 | 보너스 점수 |
|------|------|-------------|
| ⬜ 일반 | 회색 | +20 |
| 🟩 고급 | 초록 | +50 |
| 🟦 희귀 | 파랑 | +100 |
| 🟪 영웅 | 보라 | +200 |
| 🟨 전설 | 금색 | +500 |

### 보너스 적용 시점
- 칭호 해금 조건 충족 시 즉시 적용
- 1회성 (동일 칭호 중복 획득 불가)

---

## 업적 점수 계산

### 공식

```
업적 점수 = Σ(활동 점수) + Σ(해금된 칭호 보너스)
```

### 계산 예시

**유저 A**

활동 내역:
- 콘텐츠 150개 추가: 150 × 1 = 150점
- Review 80개 작성: 80 × 5 = 400점
- Note 50개 작성: 50 × 3 = 150점
- 창작 20개 작성: 20 × 10 = 200점
- 댓글 100개 작성: 100 × 1 = 100점
- 좋아요 200개 받음: 200 × 2 = 400점

해금 칭호:
- 첫 발자국 (⬜): +20점
- 열 걸음 (⬜): +20점
- 백 권의 무게 (🟩): +50점
- 장르 여행자 (⬜): +20점
- 일주일의 약속 (⬜): +20점

```
활동 점수: 150 + 400 + 150 + 200 + 100 + 400 = 1,400점
칭호 보너스: 20 + 20 + 50 + 20 + 20 = 130점
───────────────────────────────────────────────
업적 점수: 1,530점
```

---

## 점수 표시

### 프로필 표시
```
업적 점수: 1,530점
```

### 실시간 갱신
- 활동 발생 시 즉시 반영
- 칭호 해금 시 팝업 알림과 함께 점수 추가

---

## 데이터 모델 (개념)

### UserScore

| 필드 | 타입 | 설명 |
|------|------|------|
| userId | string | 사용자 ID |
| activityScore | number | 활동 점수 합계 |
| titleBonus | number | 칭호 보너스 합계 |
| totalScore | number | 업적 점수 (계산값) |
| updatedAt | datetime | 최종 갱신일시 |

### ScoreLog (점수 이력)

| 필드 | 타입 | 설명 |
|------|------|------|
| id | string | 고유 식별자 |
| userId | string | 사용자 ID |
| type | enum | 점수 유형 (activity, title) |
| action | string | 활동 종류 |
| amount | number | 점수 변동량 |
| createdAt | datetime | 발생일시 |

---

## 연동 모듈

- **콘텐츠 매니저**: 콘텐츠 추가 시 점수 적립
- **Review**: Review 작성 시 점수 적립
- **Note**: Note 작성 시 점수 적립
- **창작**: 창작 작성 시 점수 적립
- **칭호 시스템**: 칭호 해금 시 보너스 점수 적립
- **소셜 시스템**: 좋아요/댓글 시 점수 적립, 영향력 계산에 업적 점수 사용

---

*04_시스템_점수.md*